<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- 优先使用 IE 最新版本和 Chrome -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <!-- 页面描述 -->
    <meta name="description" content="欢迎访问范Microanswer的网页。你可以留言并参看他的最新作品。"/>
    <!-- 页面关键词 -->
    <meta name="keywords" content="Java,Microanswer,answer,范雪蛟,小范,阿蛟,Micro,JavaScript,开发,Vue,Php,主机,域名"/>
    <!-- 网页作者 -->
    <meta name="author" content="Microanswer, 范雪蛟, microanswer@outlook.com"/>
    <!-- 搜索引擎抓取 -->
    <meta name="robots" content="index,follow"/>
    <!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
    <meta name="HandheldFriendly" content="true">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Microanswer</title>

</head>
<body>
<div>
    <!--<h1 style="font-size: 50px;font-style: italic">Microanswer</h1>-->
    <div id="test"></div>
    <div contenteditable="true"></div>
</div>
<a target="_blank" href="http://www.miitbeian.gov.cn"
   style="position: fixed;bottom: 10px;left: 0;right: 0;text-align: center;font-size: 12px;color: gray">蜀ICP备17035828号-1</a>
</body>
</html>

<script>

    /**
     * 创建一个数字卡片。
     * @constructor
     */
    function NumberCard (number) {
        var fontSize = 60;
        var width = 70;
        var height = 100;
        var borderRadio = 12;
        var margin = 3;

        var self = this;

        this.number = number;
        // 创建数字卡片
        function __createNumberItemDom (number, anim) {
            var animTime = 500;

            // 创建卡片节点，用于数字的显示
            var cardDiv1 = document.createElement('div');
            cardDiv1.style.color = '#FFFFFF';
            cardDiv1.style.fontSize = fontSize + 'px';
            cardDiv1.style.position = 'absolute';
            cardDiv1.style.lineHeight = height + 'px';
            cardDiv1.style.left = '0';
            cardDiv1.style.backgroundColor = '#666666';
            cardDiv1.style.right = '0';
            cardDiv1.style.top = '0';
            cardDiv1.style.bottom = '0';
            cardDiv1.style.textAlign = 'center';
            cardDiv1.style.verticalAlign = 'middle';
            cardDiv1.innerText = '' + number;
            cardDiv1.style.transformOrigin = '50% 0';
            cardDiv1.style.webkitTransformOrigin = '50% 0';
            cardDiv1.style.transitionDuration = animTime + 'ms';
            cardDiv1.style.webkitTransitionDuration = animTime + 'ms';
            if (anim) {
                cardDiv1.style.transform = 'rotate3d(1,0,0,90deg)';
                setTimeout(function () {
                    cardDiv1.style.transform = '';
                }, 1);
            }
            cardDiv1.myRemove = function () {
                cardDiv1.style.transform = 'rotate3d(1,0,0,-90deg)';
                cardDiv1.style.backgroundColor = 'black';
                setTimeout(function () {
                    cardDiv1.remove();
                    for (var i = 0; i < self.__dom.children.length - 1; i++) {
                        self.__dom.children[i].remove();
                    }
                }, animTime);
            };
            return cardDiv1;
        }

        // 创建 dom 结构
        function __createDom () {

            // 创建根节点
            var rootDiv = document.createElement('div');
            rootDiv.style.display = 'inline-block';
            rootDiv.style.borderRadius = borderRadio + 'px';
            rootDiv.style.position = 'relative';
            rootDiv.style.webkitBorderRadius = borderRadio + 'px';
            rootDiv.style.margin = '0 ' + margin + 'px';
            rootDiv.style.verticalAlign = 'middle';
            rootDiv.style.lineHeight = height + 'px;';
            rootDiv.style.width = width + 'px';
            rootDiv.style.height = height + 'px';
            rootDiv.style.overflow = 'hidden';
            rootDiv.style.transformStyle = 'preserve-3d';
            rootDiv.style.webkitTransformStyle = 'preserve-3d';

            rootDiv.appendChild(__createNumberItemDom(number));

            return rootDiv;
        }

        // 创建节点树
        this.__dom = __createDom();

        /**
         * 将此 卡片添加到界面某 id 元素内。
         * @param domId
         */
        this.insert = function (domId) {
            document.querySelector(domId).appendChild(this.__dom);
        };

        /**
         * 设置数字卡片要显示的文字。
         * @param value
         */
        this.set = function (value) {
            if (!value) {
                value = '';
            }
            if (self.number == value) {
                self.number = value;
                return;
            }
            self.number = value;
            var item = __createNumberItemDom(value, true);
            self.__dom.children[0].myRemove();
            self.__dom.appendChild(item);
            // item.onload();
        };
    }

    (function (window) {
        var me = {
            init: function () {
                me.doms.numberCard.insert('#test');
                me.doms.numberCard1.insert('#test');
                var d = document.createElement('span');
                d.innerText = ':';
                document.querySelector('#test').appendChild(d);
                me.doms.numberCard3.insert('#test');
                me.doms.numberCard4.insert('#test');

                var d2 = document.createElement('span');
                d2.innerText = ':';
                document.querySelector('#test').appendChild(d2);
                me.doms.numberCard6.insert('#test');
                me.doms.numberCard7.insert('#test');
                setInterval(function () {
                    var date = new Date();

                    var hour = date.getHours().toString();
                    if (hour.length === 1) {
                        hour = '0' + hour.toString();
                    }
                    var min = date.getMinutes().toString();
                    if (min.length === 1) {
                        min = '0' + min.toString();
                    }
                    var s = date.getSeconds().toString();
                    if (s.length === 1) {
                        s = '0' + s.toString();
                    }
                    // console.log(hour + ':' + min + ':' + s);
                    me.doms.numberCard.set(hour[0]);
                    me.doms.numberCard1.set(hour[1]);
                    me.doms.numberCard3.set(min[0]);
                    me.doms.numberCard4.set(min[1]);
                    me.doms.numberCard6.set(s[0]);
                    me.doms.numberCard7.set(s[1]);
                }, 1000);
            },
            doms: {
                numberCard: new NumberCard(0),
                numberCard1: new NumberCard(0),
                numberCard3: new NumberCard(0),
                numberCard4: new NumberCard(0),
                numberCard6: new NumberCard(0),
                numberCard7: new NumberCard(0)
            },
            datas: {},
            methods: {}
        };
        me.init();
        window.me = me;
    })(window);
</script>